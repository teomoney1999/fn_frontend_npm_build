(this.webpackJsonpfinancial_management_frontend=this.webpackJsonpfinancial_management_frontend||[]).push([[0],[,,,,,,,,,,,,function(t,e,n){"use strict";n.d(e,"b",(function(){return c}));var r=n(9),a=Object(r.b)({name:"notification",initialState:{content:null,isVisible:!1,type:null},reducers:{notify:function(t,e){var n=e.payload;t.content={type:n.type,message:n.message,delay:n.delay||3e3},t.isVisible=!0},toggleVisible:function(t){t.isVisible=!1}}}),c=a.actions;e.a=a},,function(t,e,n){"use strict";e.a={url:"http://0.0.0.0:8090/api/v1"}},,function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n(2),a=n.n(r),c=n(5),u=(n(14),function(){var t=Object(c.a)(a.a.mark((function t(e){var n,r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e.url,{method:e.method?e.method:"GET",headers:{"Content-Type":"application/json","Access-Control-Allow-Methods":"GET, PUT, POST, DELETE"},body:e.body?JSON.stringify(e.body):null});case 2:return n=t.sent,t.next=5,n.json();case 5:if(r=t.sent,n.ok){t.next=8;break}throw new Error(r.error_message||"C\xf3 l\u1ed7i x\u1ea3y ra. Vui l\xf2ng th\u1eed l\u1ea1i sau!");case 8:return t.abrupt("return",r);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},function(t,e,n){"use strict";n.d(e,"d",(function(){return i})),n.d(e,"e",(function(){return s})),n.d(e,"a",(function(){return f})),n.d(e,"b",(function(){return l})),n.d(e,"c",(function(){return d}));var r=n(2),a=n.n(r),c=n(5),u=n(14),o=n(16),i=function(){var t=Object(c.a)(a.a.mark((function t(e,n){var r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(o.a)({url:"".concat(u.a.url,"/").concat(e),method:"POST",body:n});case 2:return r=t.sent,t.abrupt("return",r);case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),s=function(){var t=Object(c.a)(a.a.mark((function t(e,n){var r,c;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.id,t.next=3,Object(o.a)({url:"".concat(u.a.url,"/").concat(e,"/").concat(r),method:"PUT",body:n});case 3:return c=t.sent,t.abrupt("return",c);case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),f=function(){var t=Object(c.a)(a.a.mark((function t(e,n){var r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(o.a)({url:"".concat(u.a.url,"/").concat(e,"/").concat(n),method:"DELETE"});case 2:return r=t.sent,t.abrupt("return",r);case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),l=function(){var t=Object(c.a)(a.a.mark((function t(e,n){var r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(o.a)({url:"".concat(u.a.url,"/").concat(e)+(n?"?".concat(new URLSearchParams(n)):"")});case 2:return r=t.sent,t.abrupt("return",r.objects);case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),d=function(){var t=Object(c.a)(a.a.mark((function t(e,n){var r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(o.a)({url:"".concat(u.a.url,"/").concat(e,"/").concat(n)});case 2:return r=t.sent,t.abrupt("return",r);case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n(9),a=Object(r.b)({name:"auth",initialState:{isLoggedIn:!1,token:null,userId:null,currentUser:null},reducers:{login:function(t,e){var n=e.payload.currentUser;t.currentUser=n,t.token=t.userId=n.id,t.isLoggedIn=!0,localStorage.setItem("token",t.token),localStorage.setItem("userId",t.userId)},logout:function(t,e){t.token=null,t.currentUser=null,t.isLoggedIn=!1,t.userId=null,localStorage.removeItem("token"),localStorage.removeItem("userId")},authorized:function(t,e){t.token=t.userId=localStorage.getItem("token"),t.isLoggedIn=!!t.token}}}),c=a.actions;e.b=a},function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n(9),a=Object(r.b)({name:"balance",initialState:{amount:0,info:null,changed:!1},reducers:{add:function(t,e){t.amount+=e.payload.amount,t.changed=!0},sub:function(t,e){t.amount-=e.payload.amount,t.changed=!0},setBalanceInfo:function(t,e){t.info=e.payload,t.amount=parseInt(t.info.amount)},setBalanceAmount:function(t,e){t.amount=e.payload},afterChanged:function(t,e){t.changed=!1}}});e.b=a;var c=a.actions},,,,,,,,,,,,function(t,e,n){"use strict";var r=n(0),a=n(13),c=n.n(a),u=n(33),o=n(35),i=n.n(o),s=n(3),f=function(){return Object(s.jsx)("div",{className:i.a.spinner})};e.a=function(){return Object(s.jsxs)(r.Fragment,{children:[c.a.createPortal(Object(s.jsx)(f,{}),document.getElementById("backdrop")),c.a.createPortal(Object(s.jsx)(u.a,{}),document.getElementById("backdrop"))]})}},function(t,e,n){"use strict";n.d(e,"b",(function(){return c}));var r=n(9),a=(n(36),Object(r.b)({name:"filter",initialState:{filterPattern:{},filteredData:[],isTriggerFilter:!1,data:[]},reducers:{setFilterPattern:function(t,e){t.filterPattern=e.payload.filteredPattern},setFilteredData:function(t,e){if(t.isTriggerFilter){var n=e.payload.condition,r=n.type,a=n.date,c=e.payload.condition;t.filteredData=t.data.filter((function(t){return c.hasOwnProperty("type")&&c.hasOwnProperty("date")?t.transaction_type===r&&t.date>=a[0]&&t.date<=a[1]:c.hasOwnProperty("type")?t.transaction_type===r:c.hasOwnProperty("date")?t.date>=a[0]&&t.date<=a[1]:void 0}))}else t.filteredData=t.data},setData:function(t,e){t.data=e.payload},setTriggerFilter:function(t,e){t.isTriggerFilter=e.payload.triggerFilter}}})),c=a.actions;e.a=a},function(t,e,n){"use strict";var r=n(34),a=n.n(r),c=n(3);e.a=function(t){return Object(c.jsx)("div",{className:a.a.backdrop,onClick:t.onClose})}},function(t,e,n){t.exports={backdrop:"Backdrop_backdrop__3sd-f"}},function(t,e,n){t.exports={spinner:"LoadingSpinner_spinner__nnU83"}},function(t,e,n){"use strict";var r=n(2),a=n.n(r),c=n(22),u=n(5),o=n(30),i=n(25),s=n.n(i),f=function t(){Object(o.a)(this,t)};f.generateId=function(){return Math.random().toString(36).substr(2,5)},f.currencyFormating=function(t){var e;try{e=parseInt(t).toLocaleString("it-IT",{style:"currency",currency:"VND"})}catch(n){return null}return e},f.getCurrentTimestamp=function(){return Math.floor(Date.now()/1e3)},f.timestampToDate=function(t,e){var n;try{n=s()(t).format(e)}catch(r){return null}return n},f.dateToTimestamp=function(t){var e;try{e=s()(t).unix()}catch(n){return null}return e},f.dataFormatForGetMany=function(){var t=Object(u.a)(a.a.mark((function t(e){var n,r,u;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(r in n=[],e)u=Object(c.a)({id:r},e[r]),n.push(u);return t.abrupt("return",n);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),f.dataFormatForGetSingle=function(){var t=Object(u.a)(a.a.mark((function t(e,n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(c.a)({id:e},n));case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.a=f},,,,,,,,,,function(t,e,n){},function(t,e,n){},,,,function(t,e,n){"use strict";n.r(e);var r=n(0),a=n.n(r),c=n(13),u=n.n(c),o=n(29),i=n(11),s=n(9),f=n(18),l=n(19),d=n(12),p=Object(s.b)({name:"user",initialState:{info:null},reducers:{setUserInfo:function(t,e){t.info=e.payload}}}),b=p,h=p.actions,j=n(32),g=Object(s.a)({reducer:{auth:f.b.reducer,user:b.reducer,notification:d.a.reducer,balance:l.b.reducer,filter:j.a.reducer}}),m=(n(46),n(4)),O=n(2),y=n.n(O),v=n(5),x=n(17),k="balance",w=n(28),I=function(t){var e=Object(i.b)(),n=Object(r.useState)(!1),a=Object(w.a)(n,2),c=a[0],u=a[1],o=Object(i.c)((function(t){return t.notification})),s=o.content,f=o.isVisible;return Object(r.useEffect)((function(){if(f){u(!0);var t=setTimeout((function(){e(d.b.toggleVisible()),u(!1)}),s.delay);return function(){clearTimeout(t)}}}),[f,s]),c},S=(n(47),n(31)),T=n(3),F=Object(r.lazy)((function(){return n.e(10).then(n.bind(null,113))})),P=Object(r.lazy)((function(){return n.e(4).then(n.bind(null,107))})),E=Object(r.lazy)((function(){return n.e(11).then(n.bind(null,112))})),_=Object(r.lazy)((function(){return n.e(13).then(n.bind(null,116))}));var L=function(){var t=Object(i.b)(),e=I(),n=Object(i.c)((function(t){return t.auth})),a=(Object(i.c)((function(t){return t.user})).info,n.isLoggedIn),c=n.token,u=n.userId;Object(r.useEffect)((function(){t(f.a.authorized())}),[t,f.a.authorized]),Object(r.useEffect)((function(){console.log("Get current user"),t(function(t){return function(){var e=Object(v.a)(y.a.mark((function e(n){var r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t){e.next=3;break}return e.abrupt("return");case 3:return console.log("token",t),e.next=6,Object(x.c)("user",t);case 6:r=e.sent,console.log("userInfo From App.js",r),n(h.setUserInfo(r)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),n(d.b.notify({message:e.t0.message,type:"danger"}));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()}(c))}),[t,c]);var o=Object(i.c)((function(t){return t.balance}));return Object(r.useEffect)((function(){var e;if(a)if(o.changed){var r={amount:o.amount,user_id:n.userId};t((e=r,function(){var t=Object(v.a)(y.a.mark((function t(n){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(x.d)(k,e);case 3:n(l.a.afterChanged()),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),n(d.b.notify({message:t.t0.message||"Kh\xf4ng th\u1ec3 c\u1eadp nh\u1eadt s\u1ed1 d\u01b0",type:"danger"}));case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}()))}else t(function(t){return function(){var e=Object(v.a)(y.a.mark((function e(n){var r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(x.b)(k,{user_id:t,get_latest:!0});case 3:r=e.sent,n(l.a.setBalanceInfo(r[0])),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),n(d.b.notify({message:e.t0.message||"Kh\xf4ng th\u1ec3 l\u1ea5y th\xf4ng tin s\u1ed1 d\u01b0",type:"danger"}));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()}(u))}),[a,o.changed]),Object(T.jsx)(r.Fragment,{children:Object(T.jsxs)(r.Suspense,{fallback:Object(T.jsx)(S.a,{}),children:[e&&Object(T.jsx)(_,{}),Object(T.jsxs)(m.c,{children:[!a&&Object(T.jsx)(m.a,{path:"/signin",render:function(t){return Object(T.jsx)(P,{})}}),a&&Object(T.jsx)(E,{}),!a&&Object(T.jsx)(m.a,{path:"*",render:function(t){return Object(T.jsx)(F,{})}})]})]})})},C=function(t){t&&t instanceof Function&&n.e(14).then(n.bind(null,108)).then((function(e){var n=e.getCLS,r=e.getFID,a=e.getFCP,c=e.getLCP,u=e.getTTFB;n(t),r(t),a(t),c(t),u(t)}))};u.a.render(Object(T.jsx)(a.a.StrictMode,{children:Object(T.jsx)(o.a,{children:Object(T.jsx)(i.a,{store:g,children:Object(T.jsx)(L,{})})})}),document.getElementById("root")),C()}],[[51,1,2]]]);
//# sourceMappingURL=main.e97a6d95.chunk.js.map